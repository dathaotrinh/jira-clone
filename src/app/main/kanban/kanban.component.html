<!-- Kanban Board -->
<div class="div mx-4 mb-4">
  <h1 class="mt-4">Kanban Board</h1>
  <input placeholder="Search">
  <button class="btn">Only My Issues</button>
  <button class="btn">Recently Updated</button>
</div>

<!-- <div class="div ml-4" style="width: 100%; height: 100%;"> -->
  <div class="row ml-4">
    <div class="column mr-3">

      <div style="max-width: 250px;" cdkDropList #backlogList="cdkDropList" [cdkDropListData]="backlog"
        [cdkDropListConnectedTo]="[selectedList, inprogressList, doneList]" (cdkDropListDropped)="drop($event)">

        <div>
          <div class="h6 text-center my-4">Backlog {{backlog.length}}</div>
        </div>

        <div>
          <div class="item-box" *ngFor="let item of backlog; let i=index" cdkDrag (click)="showModal(i, backlog)">
            <div class="example-custom-placeholder" *cdkDragPlaceholder></div>
            <div>{{item}}</div>
            <!-- <div [ngStyle]="{'color': priorityColor(priority)}"><mat-icon>arrow_upward</mat-icon></div> -->

            <div *ngIf="backlog.length === 0"></div>
          </div>
        </div>

      </div>
    </div>
    <div class="column mr-3">
      <div style="max-width: 250px;" cdkDropList #selectedList="cdkDropList" [cdkDropListData]="selected"
        [cdkDropListConnectedTo]="[backlogList, inprogressList, doneList]" (cdkDropListDropped)="drop($event)">

        <div>
          <div class="h6 text-center mt-2 my-4">Selected For Development {{selected.length}}</div>
        </div>

        <div>
          <div class="item-box" *ngFor="let item of selected; let i=index;" cdkDrag (click)="showModal(i, selected)">
            <div class="example-custom-placeholder" *cdkDragPlaceholder></div>
            {{item}}
          </div>
          <div *ngIf="selected.length === 0"></div>
        </div>

      </div>

    </div>
    <div class="column mr-3">
      <div style="max-width: 250px;" cdkDropList #inprogressList="cdkDropList" [cdkDropListData]="inprogress"
        [cdkDropListConnectedTo]="[selectedList, backlogList, doneList]" (cdkDropListDropped)="drop($event)">

        <div>
          <div class="h6 text-center mt-2 my-4">In Progress {{inprogress.length}}</div>
        </div>

        <div>
          <div class="item-box" *ngFor="let item of inprogress; let i=index;" cdkDrag (click)="showModal(i, inprogress)">
            <div class="example-custom-placeholder" *cdkDragPlaceholder></div>
            {{item}}
          </div>
          <div *ngIf="inprogress.length === 0"></div>
        </div>
      </div>
    </div>


    <div class="column mr-3">
      <div style="max-width: 250px;" cdkDropList #doneList="cdkDropList" [cdkDropListData]="done"
        [cdkDropListConnectedTo]="[selectedList, backlogList, inprogressList]" (cdkDropListDropped)="drop($event)" >
        <div>
          <div class="h6 text-center my-4">Done {{done.length}}</div>
        </div>

        <div>
          <div class="item-box" *ngFor="let item of done; let i=index;" cdkDrag (click)="showModal(i, done)">
            <div class="example-custom-placeholder" *cdkDragPlaceholder></div>
            {{item}}
          </div>
          <div *ngIf="done.length === 0"></div>
        </div>

      </div>
    </div>

  </div>
<!-- </div> -->


<nz-modal [(nzVisible)]="isVisible" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" [nzFooter]="null" [nzWidth]="900" [nzClosable]="false">
  <div class="row mb-4">
    <div class="col-7">{{type}}</div>
    <div class="col-1"><mat-icon>visibility</mat-icon></div>
    <div class="col-1"> <mat-icon>feedback</mat-icon></div>
    <div class="col-1"><mat-icon>share</mat-icon></div>
    <div class="col-1"><mat-icon>more_horiz</mat-icon></div>
    <div class="col-1"><mat-icon>close</mat-icon></div>
  </div>

  <div class="row">
    <div class="col-8">
      <h1>{{title}}</h1>
      <p style="font-weight: bold;">Description</p>
      <p (click)="onDescriptionChanged()" *ngIf="!onDescription">{{description}}</p>
      <div id="quill" *ngIf="onDescription">
        <quill-editor [styles]="editorStyle" [(ngModel)]="description">
        </quill-editor>
        <button class="my-3" nz-button nzType="primary" style="background-color: #0847A6; border-color: #0847A6;">Save</button>
        <button nz-button nzType="default" style="border-color: white;">Cancel</button>

      </div>


      <p style="font-weight: bold;">Comment</p>

      <nz-list *ngIf="data.length" [nzDataSource]="data" [nzRenderItem]="item" [nzItemLayout]="'horizontal'">
        <ng-template #item let-item>
          <nz-comment [nzAuthor]="item.author" [nzDatetime]="item.displayTime">
            <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="item.avatar"></nz-avatar>
            <nz-comment-content>
              <p>{{ item.content }}</p>
            </nz-comment-content>
          </nz-comment>
        </ng-template>
      </nz-list>
      <nz-comment>
        <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="user.avatar"></nz-avatar>
        <nz-comment-content>
          <nz-form-item>
            <textarea [(ngModel)]="inputValue" nz-input rows="2"></textarea>
          </nz-form-item>

          <nz-form-item>
            <button nz-button nzType="primary"  [nzLoading]="submitting" [disabled]="!inputValue" (click)="handleSubmit();"style="background-color: #0847A6; border-color: #0847A6; color: white;">Save</button>
            <button nz-button nzType="default" style="border-color: white;">Cancel</button>
          </nz-form-item>

        </nz-comment-content>
      </nz-comment>


    </div>




    <div class="col-4">
      <p style="font-weight: bold;">Status</p>
      <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select OS" [(ngModel)]="selectedStatus">
        <nz-option nzCustomContent nzLabel="Done" nzValue="done">Done</nz-option>
        <nz-option nzCustomContent nzLabel="Selected For Development" nzValue="selected">Selected For Development</nz-option>
        <nz-option nzCustomContent nzLabel="In Progress" nzValue="inprogress">In Progress</nz-option>
        <nz-option nzCustomContent nzLabel="Backlog" nzValue="backlog">Backlog</nz-option>
      </nz-select>

      <p class="mt-3" style="font-weight: bold;">Reporter</p>
      <nz-avatar nzIcon="user" nzSrc={{avatar}}></nz-avatar>
      <span> {{reporterName}}</span>

      <p class="mt-3" style="font-weight: bold;">Assignee</p>
      <nz-avatar nzIcon="user" nzSrc={{avatar}}></nz-avatar>
      <span> {{reporterName}}</span>

      <p class="mt-3" style="font-weight: bold;">Priority</p>

        <div>
          <mat-icon [ngStyle]="{'color': priorityColor(priority)}">arrow_upward</mat-icon><span class="aligned-with-icon">{{priority}}</span>
        </div>


        <p class="mt-3" style="font-weight: bold;">Original Estimate</p>

        <div>

        </div>
    </div>
  </div>


</nz-modal>


